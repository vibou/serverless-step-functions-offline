service: ServerlessStepPlugin

frameworkVersion: '>=<3.15.0'

plugins:
  - serverless-offline
  - serverless-step-functions
  - '@vibou/serverless-step-functions-offline'

provider:
  name: aws
  runtime: nodejs14.x
  cfLogs: true
  region: eu-west-1
  memorySize: 128
  timeout: 3

custom:
  stepFunctionsOffline:
    Producer: producer
    Reducer: reducer
    MappingFunction: mapper

functions: 
  ${file(functions.yml)}

stepFunctions:
  stateMachines:
    map_reduce:
      definition: 
        Comment: 'Export a PDF document for the given dashboard'
        StartAt: Producer
        States: ${file(states.yml)}
      
